@model Mercadia.Web.ViewModels.Stores.DashboardViewModel
@{
    ViewBag.Title = "Dashboard";
    Layout = "~/Views/Shared/_CenterLayout_graph.cshtml";
}

<header class="page-header">
    <h1 class="page-title">@Model.Store.Name Dashboard</h1>
</header>


<h4>
   Sales @DateTime.Now.ToString("dd MMM yyyy")
</h4>
<div class="row">
    <div class="col-md-6">
         <div id="productChart">

         </div>
    </div>
    <div class="col-md-6">
        <table class="table table-striped table-hover table-res">
            <thead>
                <tr>
                    <th>Product</th>
                    <th>Quantity</th>
                    <th>Unit Price</th>
                    <th>Item Price</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.Products)
                {
                    <tr>
                        <td><p>@item.ProductName</p></td>
                        <td><p>@item.Quantity</p></td>
                        <td><p>@item.ItemPrice</p></td>
                        <td><p>@(item.ItemPrice * item.Quantity)</p></td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<div class="jumbotron top-space">
    <h4>
        Update your Store settings, products and even your store Image.
    </h4>
    <p class="text-right"><a class="btn btn-primary btn-large" href="~/manage/stores/update/@Model.Store.Id">Update store »</a></p>
</div>

@section scripts{
<script>
    $(document).ready(function () {
        barchart("productChart");
    });

    function barchart(divid) {
        var x = [],
            y = [];

        @foreach (KeyValuePair<string, int> entry in Model.GraphData)
        {
            @:x.push("@entry.Key");
            @:y.push("@entry.Value")
        }

        Plotly.plot(divid, [{
            x: x,
            y: y,
            type: 'bar'
        }]);
    }
    </script>    
}